<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>What is new in Offix · Offix</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# 0.11.0"/><meta name="docsearch:version" content="0.11.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="What is new in Offix · Offix"/><meta property="og:type" content="website"/><meta property="og:url" content="https://offix.dev/"/><meta property="og:description" content="# 0.11.0"/><meta property="og:image" content="https://offix.dev/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://offix.dev/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/offix-logo.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/offix-logo.png" alt="Offix"/><h2 class="headerTitleWithLogo">Offix</h2></a><a href="/versions"><h3>0.11.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started" target="_self">Documentation</a></li><li class=""><a href="https://github.com/aerogear/offix" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Releases</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/client-configuration">Client Configuration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">OffixClient</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/offline-client">Offline Client</a></li><li class="navListItem"><a class="navItem" href="/docs/offix-cache">Client Cache</a></li><li class="navListItem"><a class="navItem" href="/docs/conflict-client">Conflicts Client</a></li><li class="navListItem"><a class="navItem" href="/docs/conflict-server">Conflict Server</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Platforms</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/react">React</a></li><li class="navListItem"><a class="navItem" href="/docs/react-native">React Native</a></li><li class="navListItem"><a class="navItem" href="/docs/ionic">Ionic and Cordova</a></li><li class="navListItem"><a class="navItem" href="/docs/android">Android</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced topics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/offix-scheduler-introduction">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Releases</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/release-notes">Release notes</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">What is new in Offix</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="0110"></a><a href="#0110" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0.11.0</h1>
<p>The 0.11.0 release simplifies the creation of offline clients.</p>
<h2><a class="anchor" aria-hidden="true" id="breaking-changes"></a><a href="#breaking-changes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking Changes</h2>
<h3><a class="anchor" aria-hidden="true" id="offlineclient-replaced-with-apolloofflineclient"></a><a href="#offlineclient-replaced-with-apolloofflineclient" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OfflineClient replaced with ApolloOfflineClient</h3>
<p>The <code>OfflineClient</code> class has been replaced with <code>ApolloOfflineClient</code>. <code>OfflineClient</code> was a wrapper that would internally create an <code>ApolloClient</code> which could be accessed after initialization. The flow looked something like this.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> offlineClient = <span class="hljs-keyword">new</span> OfflineClient(options)
<span class="hljs-keyword">const</span> apolloClient = <span class="hljs-keyword">await</span> offlineClient.init()
</code></pre>
<p>The new <code>ApolloOfflineClient</code> directly <code>extends</code> <code>ApolloClient</code> which makes initialization simpler and more flexible as all of the standard Apollo Client options are supported.</p>
<p>Initialization is slightly different, mainly, and <code>ApolloLink</code> must be passed that can connect with the GraphQL server. See the example code below.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">import</span> { ApolloOfflineClient } <span class="hljs-keyword">from</span> <span class="hljs-string">'offix-client'</span>

<span class="hljs-keyword">const</span> link = <span class="hljs-keyword">new</span> HttpLink({ <span class="hljs-attr">uri</span>: <span class="hljs-string">'http://localhost/graphql'</span> })
  
<span class="hljs-keyword">const</span> config = {
  link,
  typeDefs,
  resolvers,
  ...otherOptions
}

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> ApolloOfflineClient(config)
<span class="hljs-keyword">await</span> client.init()
...

<span class="hljs-comment">// `client` is an ApolloClient so you can call all of the methods you'd expect</span>
client.query(...)
client.mutate(...)
client.offlineMutate(...)
</code></pre>
<h1><a class="anchor" aria-hidden="true" id="0100"></a><a href="#0100" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0.10.0</h1>
<p>The <code>0.10.0</code> release builds upon the <code>0.9.0</code> release and adds two new packages. <code>offix-scheduler</code> and <code>offix-conflicts-client</code></p>
<h2><a class="anchor" aria-hidden="true" id="offix-scheduler"></a><a href="#offix-scheduler" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>offix-scheduler</h2>
<p><code>offix-scheduler</code> now holds the core functionalities of the Offix project. That includes queueing, scheduling, persistence and fulfilment of offline operations.</p>
<p><code>offix-scheduler</code> can and will be used to create new clients in the future that are not based on Apollo Client. Clients we are investigating are URQL (see <a href="https://github.com/aerogear/offix/issues/235">https://github.com/aerogear/offix/issues/235</a>), Relay (see <a href="https://github.com/aerogear/offix/issues/236">https://github.com/aerogear/offix/issues/236</a>) and plain HTTP/REST. <code>offix-client</code> now uses <code>offix-scheduler</code> under the hood.</p>
<p>There have been no functional changes to <code>offix-client</code> and everything should remain the same.</p>
<h2><a class="anchor" aria-hidden="true" id="offix-conflicts-client"></a><a href="#offix-conflicts-client" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>offix-conflicts-client</h2>
<p>The <code>offix-conflicts-client</code> package contains all the interfaces and current implementations for client side pluggable conflict detection and resolution. Right now this package is used in to deliver the conflict capabilities in <code>offix-client</code> and it could also be used by package maintainers to implement conflict capabilities in new clients also. It is not important for application developers looking to use <code>offix-client</code></p>
<h1><a class="anchor" aria-hidden="true" id="090"></a><a href="#090" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0.9.0</h1>
<p>The <code>0.9.0</code> release is a significant refactor of the internals of Offix and introduces a couple of breaking changes to the end user API.</p>
<ul>
<li>We have a new documentation site available at <a href="https://offix.dev">offix.dev</a>. Special thanks to <a href="https://github.com/LakshanKarunathilake">@LakshanKarunathilake</a> for the complete overhaul.</li>
<li>All queueing, scheduling, persistence, and replaying of offline operations now happens outside of the Apollo Link chain. Instead we use a much more generic queueing mechanism that opens the door to great flexibility.</li>
<li>It paves the way for new features in the future. Most importantly, the ability to use Offix with other GraphQL clients, or even with regular RESTful clients (and more).</li>
<li>The internal architecture of Offix is drastically simplified. It is much easier to understand, maintain and test.</li>
</ul>
<p>With this release, <code>OfflineClient</code> behaves mostly the same way as it has before but there were a couple of breaking changes which are outlined below.</p>
<h2><a class="anchor" aria-hidden="true" id="background"></a><a href="#background" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Background</h2>
<p>Previous versions of Offix relied heavily on something called <a href="https://www.apollographql.com/docs/link/overview/">Apollo Link</a> which is essentially chain of &quot;middleware&quot; functions that can modify the behaviour and results from calls like <code>ApolloClient.mutate()</code> and <code>ApolloClient.query()</code>. Most of the underlying queueing, scheduling, persistence and replaying of offline mutations done by Offix happened inside the of the Apollo Link chain. This approach seemed like a good idea, but over time we have realised it made things difficult to maintain and it kept us limited in the features we could provide.</p>
<h2><a class="anchor" aria-hidden="true" id="breaking-changes-1"></a><a href="#breaking-changes-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking Changes</h2>
<h3><a class="anchor" aria-hidden="true" id="clientofflinemutation-has-been-deprecated-in-favour-of-clientofflinemutate"></a><a href="#clientofflinemutation-has-been-deprecated-in-favour-of-clientofflinemutate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>client.offlineMutation</code> has been deprecated in favour of <code>client.offlineMutate</code></h3>
<p>It didn't make sense to have a <code>mutate</code> and <code>offlineMutation</code> method. <code>offlineMutation</code> has been deprecated in favour of <code>offlineMutate</code>. <code>offlineMutation</code> can still be used, but it logs a deprecation warning to the console and it will be removed in the next release.</p>
<p><strong>Suggestion:</strong> Change all uses of <code>client.offlineMutation</code> to <code>client.offlineMutate</code></p>
<h3><a class="anchor" aria-hidden="true" id="clientmutate-no-longer-does-any-offline-scheduling"></a><a href="#clientmutate-no-longer-does-any-offline-scheduling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>client.mutate no longer does any offline scheduling</h3>
<p>A side effect of our Apollo Link architecture was that <code>client.mutate()</code> would also schedule operations while offline (as well as <code>client.offlineMutation</code>). Using <code>client.mutate()</code> for offline operations was never recommended but it was possible. This is no longer the case.</p>
<p><strong>Suggestion:</strong> any places where you intentionally have offline behaviour using <code>client.mutate()</code> should use <code>client.offlineMutate()</code> instead.</p>
<h3><a class="anchor" aria-hidden="true" id="removed-onlineonly-directive"></a><a href="#removed-onlineonly-directive" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Removed <code>@OnlineOnly</code> directive</h3>
<p>Because <code>client.mutate()</code> does not schedule offline operations anymore, the <code>@OnlineOnly</code> directive is no longer useful and has been completely removed.</p>
<p><strong>Suggestion:</strong> remove all instances of the <code>@OnlineOnly</code> directive and ensure mutations that used it are called with <code>client.mutate()</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="errors-from-clientofflinemutate-do-not-have-networkerror-property"></a><a href="#errors-from-clientofflinemutate-do-not-have-networkerror-property" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Errors from <code>client.offlineMutate()</code> do not have <code>networkError</code> property.</h3>
<p>Errors originating from the Apollo Link chain are found on <code>error.networkError</code>.
This led to checks in application code such as <code>if (error.networkError.offline)</code>,
where <code>error.networkError</code> is the actual error thrown.</p>
<p>This is no longer the case. Now the everything is found on the top level <code>error</code> object.
See the example below:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">mutation</span>: gql<span class="hljs-string">`
    mutation greeting($name: String!){
    greeting(name: $name) {
      body
    }
  }`</span>,
  <span class="hljs-attr">variables</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'hello world!'</span>
  }
};

client.offlineMutate(options).catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-comment">// This used to be `if (error.networkError.offline)`</span>
  <span class="hljs-keyword">if</span>(error.offline) {
    <span class="hljs-comment">// This used to be `error.networkError.watchOfflineChange()`</span>
    error.watchOfflineChange().then(...)
  }
});
</code></pre>
<p>This is the same for local conflict errors:</p>
<pre><code class="hljs css language-js">client.offlineMutate(options).catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-comment">// This used to be `if (error.networkError.localConflict)`</span>
  <span class="hljs-keyword">if</span> (error.localConflict) {
    <span class="hljs-comment">// handle local conflict</span>
  }
});
</code></pre>
<p><strong>Suggestion:</strong> review all code where <code>error.networkError.&lt;property name&gt;</code> is being accessed and change it to <code>error.&lt;property name&gt;</code></p>
<h3><a class="anchor" aria-hidden="true" id="offlinequeue-and-offlinestore-are-generic-typescript-users-only"></a><a href="#offlinequeue-and-offlinestore-are-generic-typescript-users-only" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>OfflineQueue</code> and <code>OfflineStore</code> are generic (TypeScript Users Only)</h3>
<p>The <code>OfflineQueue</code> and <code>OfflineStore</code> classes and some related interfaces have been refactored to handle generic objects. TypeScript users may experience compilation issues if their application references these types.</p>
<p>New types have been added to <code>offix-client</code> for Apollo specific usage.</p>
<p><strong>Suggestion:</strong> Migrate the following references:</p>
<ul>
<li><code>OfflineQueue</code> becomes <code>ApolloOfflineQueue</code></li>
<li><code>OfflineStore</code> becomes <code>ApolloOfflineStore</code></li>
<li><code>OfflineQueueListener</code> becomes <code>ApolloOfflineQueueListener</code></li>
<li><code>IResultProcessor</code> becomes <code>ApolloIResultProcessor</code></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="new-arguments-passed-to-registerofflineeventlistener-functions"></a><a href="#new-arguments-passed-to-registerofflineeventlistener-functions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New Arguments passed to registerOfflineEventListener functions</h3>
<p><code>registerOfflineEventListener</code> registers functions that are called on events originating from the <code>OfflineQueue</code>.</p>
<pre><code class="hljs css language-js">client.registerOfflineEventListener({
  onOperationEnqueued(operation) {
    <span class="hljs-comment">// called when operation was placed on the queue</span>
  },
  <span class="hljs-attr">onOperationFailure</span>: <span class="hljs-function">(<span class="hljs-params">operation</span>) =&gt;</span> {
    <span class="hljs-comment">// called when the operation failed</span>
  },
  <span class="hljs-attr">onOperationSuccess</span>: <span class="hljs-function">(<span class="hljs-params">operation</span>) =&gt;</span> {
    <span class="hljs-comment">// called when the operation was fulfilled</span>
  },
  <span class="hljs-attr">onOperationRequeued</span>: <span class="hljs-function">(<span class="hljs-params">operation</span>) =&gt;</span> {
    <span class="hljs-comment">// called when an operation was loaded in from storage and placed back on the queue</span>
    <span class="hljs-comment">// This would happen across app restarts</span>
  },
  queueCleared() {
    <span class="hljs-comment">// called when all operations are fulfilled and the queue is cleared</span>
  }
});
</code></pre>
<p>In previous versions of <code>offix-client</code>, these functions had an <a href="https://www.apollographql.com/docs/link/overview/">Apollo Operation</a> object passed to them. Because Offix no longer uses Apollo Link, this is no longer the case. Instead an <a href="https://github.com/aerogear/offix/blob/b1e42936ff05a3d21c93795eadba07217bd13f23/packages/offix-client/src/apollo/ApolloOfflineClient.ts#L53"><code>ApolloQueueEntryOperation</code></a> is passed. See the example object below.</p>
<pre><code class="hljs"><span class="hljs-attr">{</span>
  <span class="hljs-attr">qid</span>: <span class="hljs-string">'client:abc123'</span>
  <span class="hljs-attr">op</span>: <span class="hljs-string">{ </span>
    <span class="hljs-attr">context</span>: <span class="hljs-string">{</span>
      <span class="hljs-attr">operationName</span>: <span class="hljs-string">'createItem',</span>
      <span class="hljs-attr">conflictBase</span>: <span class="hljs-string">undefined,</span>
      <span class="hljs-attr">idField</span>: <span class="hljs-string">'id',</span>
      <span class="hljs-attr">returnType</span>: <span class="hljs-string">'Item'</span>
    <span class="hljs-attr">},</span>
    <span class="hljs-attr">mutation</span>: <span class="hljs-string">&lt;mutation object parsed by gql&gt;,</span>
    <span class="hljs-attr">optimisticResponse</span>: <span class="hljs-string">&lt;optimistic response object&gt;,</span>
    <span class="hljs-attr">variables</span>: <span class="hljs-string">&lt;mutation variables&gt;</span>
  <span class="hljs-attr">}</span>
<span class="hljs-attr">}</span>
</code></pre>
<p><code>ApolloQueueEntryOperation</code> objects have two top level fields:</p>
<ul>
<li><code>qid</code> - Queue ID. This ID is randomly generated and mostly used by the <code>OfflineQueue</code>.</li>
<li><code>op</code> - The operation. In <code>offix-client</code> It's of type <code>MutationOptions</code>, the options object passed into <code>client.offlineMutate</code> with some extra metadata set by <code>offix-client</code>.</li>
</ul>
<p><strong>Suggestion:</strong> review any code where <code>registerOfflineEventListener</code> is used and refactor the listener functions to use the new data structure being passed.</p>
<h3><a class="anchor" aria-hidden="true" id="operations-stored-in-offlinestore-are-not-backwards-compatible"></a><a href="#operations-stored-in-offlinestore-are-not-backwards-compatible" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Operations Stored in OfflineStore are not backwards compatible</h3>
<p>Because of the architectural changes to Offix, the objects stored in the OfflineQueue and OfflineStore are different. Previously, the queue and storage mechanisms were based around the <a href="https://www.apollographql.com/docs/link/overview/">Apollo Operation</a>.</p>
<p><code>offix-client</code> now queues and stores objects based off the <code>MutationOptions</code> object. Unfortunately these changes were not backwards compatible. Existing applications using <code>offix-client</code> that have pending offline operations will not be able to load and requeue those operations after an upgrade to the latest version. The data will still exist in the store and it will be accessible manually. Developers will have to migrate the data themselves. <strong>Data in the Apollo Cache is not affected.</strong> We hope this issue will affect very few users if any at all.</p>
<p>To ensure this doesn't happen in future, we have implemented versioning and new serialize/deserialize interfaces that will allow our storage mechanism to handle these types of upgrades/migrations.</p>
<p><strong>Suggestions:</strong></p>
<ul>
<li>Ensure users have no pending offline operations before administering the update.</li>
<li>Manually migrate the data using custom application code.</li>
<li>If it's not critical, users can re-enter the data or redo their offline operations.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="features"></a><a href="#features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h2>
<h3><a class="anchor" aria-hidden="true" id="new-documentation-website"></a><a href="#new-documentation-website" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New Documentation Website!</h3>
<p>Our documentation website has been rebuilt using Docusaurus. Special thanks to <a href="https://github.com/LakshanKarunathilake">@LakshanKarunathilake</a> for the complete overhaul.</p>
<h3><a class="anchor" aria-hidden="true" id="offlinequeue-is-directly-accessible-on-the-client"></a><a href="#offlinequeue-is-directly-accessible-on-the-client" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OfflineQueue is directly accessible on the client</h3>
<p><code>client.queue</code> is now directly accessible. This opens up the possibility for your application to directly see the operations in the queue. It also means you can manually call <code>client.queue.forwardOperations()</code> to execute all operations in the queue.</p>
<h3><a class="anchor" aria-hidden="true" id="offlineclient-accepts-user-provided-inmemorycache"></a><a href="#offlineclient-accepts-user-provided-inmemorycache" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OfflineClient accepts user provided <code>InMemoryCache</code></h3>
<p>It is now possible to pass your own <code>InMemoryCache</code> into <code>OfflineClient</code>. This makes it possible to configure things like cache redirects.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> InMemoryCache(yourCacheConfig);

<span class="hljs-keyword">const</span> offlineClient = <span class="hljs-keyword">new</span> OfflineClient({
  <span class="hljs-attr">httpUrl</span>: <span class="hljs-string">'https://example.com'</span>,
  cache
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="offlineclient-enables-wiping-out-cache-using-persistor-interface"></a><a href="#offlineclient-enables-wiping-out-cache-using-persistor-interface" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OfflineClient enables wiping out cache using persistor interface</h3>
<p><code>offlineClient.persitor.purge()</code> method will wipe entire persistence layer for Apollo cache.</p>
<blockquote>
<p>NOTE: InMemoryCache needs to be wiped out as well along with the client. Please execute <code>offlineClient.cache.rest()</code></p>
</blockquote>
<h1><a class="anchor" aria-hidden="true" id="080"></a><a href="#080" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0.8.0</h1>
<h2><a class="anchor" aria-hidden="true" id="features-1"></a><a href="#features-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h2>
<h3><a class="anchor" aria-hidden="true" id="offix-react-hooks-alpha-released"></a><a href="#offix-react-hooks-alpha-released" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Offix React Hooks Alpha released</h3>
<p>Offix React Hooks provides helpers for using offix within React and React Native.
Please refer to package README for more information</p>
<h3><a class="anchor" aria-hidden="true" id="ability-to-customize-apollo-link-chain"></a><a href="#ability-to-customize-apollo-link-chain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ability to customize Apollo Link chain</h3>
<p><code>OffixClientConfig.terminatingLink</code> allows to customize client by adding additional links
for handling authentication, network requests etc.</p>
<h3><a class="anchor" aria-hidden="true" id="new-way-to-access-apollo-client"></a><a href="#new-way-to-access-apollo-client" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New way to access Apollo Client</h3>
<p><code>OfflineClient.apolloClient</code> is now public. This means <code>apolloClient</code> is directly accessible after <code>OfflineClient.init()</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="breaking-changes-2"></a><a href="#breaking-changes-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking changes</h2>
<h3><a class="anchor" aria-hidden="true" id="changes-for-subscriptions-and-file-uploads"></a><a href="#changes-for-subscriptions-and-file-uploads" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Changes for Subscriptions and File Uploads</h3>
<p>Subscriptions and file uploads were removed from the main library.
Developers can still configure Subscription access directly int their application by
creating Apollo link acording to documentation and passing <code>OffixClientConfig.terminatingLink</code></p>
<h3><a class="anchor" aria-hidden="true" id="071"></a><a href="#071" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0.7.1</h3>
<h4><a class="anchor" aria-hidden="true" id="offline-operations-persist-optimistic-response"></a><a href="#offline-operations-persist-optimistic-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Offline operations persist optimistic response</h4>
<p>Offline operations will now cache update functional and automatically apply optimistic response
<code>OffixClientConfig.mutationCacheUpdates</code> is still required to see optimistic responses after application restart.</p>
<h4><a class="anchor" aria-hidden="true" id="watchofflinechange-returns-mutation-result"></a><a href="#watchofflinechange-returns-mutation-result" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>watchOfflineChange returns mutation result</h4>
<p>We have discovered bug where <code>watchOfflineChange</code> method from <code>OfflineError</code> was missing mutation results.
This is now fixed so your UI can instantly watch for offline chances and render when succeeded.</p>
<h3><a class="anchor" aria-hidden="true" id="070"></a><a href="#070" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>0.7.0</h3>
<h4><a class="anchor" aria-hidden="true" id="support-apollo-26x"></a><a href="#support-apollo-26x" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support Apollo 2.6.x</h4>
<p>Apollo Client 2.6.x with new typings is now supported.</p>
<h4><a class="anchor" aria-hidden="true" id="extended-conflict-support"></a><a href="#extended-conflict-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extended conflict support</h4>
<p>New conflict implementation requires changes on both client and server.
On server we have changed conflict detection mechanism to single method.
Server side conflict resolution was removed due to the fact that we could not provide
reliable diff source without separate store.</p>
<h5><a class="anchor" aria-hidden="true" id="server-side-implementation"></a><a href="#server-side-implementation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Server side implementation:</h5>
<pre><code class="hljs css language-javascript"> <span class="hljs-keyword">const</span> conflictError = conflictHandler.checkForConflict(greeting, args);
      <span class="hljs-keyword">if</span> (conflictError) {
        <span class="hljs-keyword">throw</span> conflictError;
      }
}
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="client-side-implementation"></a><a href="#client-side-implementation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Client side implementation:</h5>
<p>Client side implementation now requires users to apply <code>returnType</code> to context when performing a mutation.
Conflict interface now has an additional method <code>mergeOccured</code> that will be triggered when a conflict was resolved without data loss.</p>
<p>Please refer to documentation for more details.</p>
<h4><a class="anchor" aria-hidden="true" id="breaking-changes-3"></a><a href="#breaking-changes-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking changes</h4>
<h5><a class="anchor" aria-hidden="true" id="datasync-config-renamed"></a><a href="#datasync-config-renamed" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataSync Config renamed</h5>
<p><code>DataSyncConfig</code> interface was renamed to <code>OffixClientConfig</code>.
Please review if your configuration still conforms to the new interface.</p>
<h5><a class="anchor" aria-hidden="true" id="cache-helper-interface"></a><a href="#cache-helper-interface" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cache Helper Interface</h5>
<p>Cache Helper interface now will now accept object instead of individual parameters:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> updateFunction = getUpdateFunction({
  mutationName,
  idField,
  operationType,
  updateQuery
});
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/offix-scheduler-introduction"><span class="arrow-prev">← </span><span>Offix Scheduler</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#breaking-changes">Breaking Changes</a><ul class="toc-headings"><li><a href="#offlineclient-replaced-with-apolloofflineclient">OfflineClient replaced with ApolloOfflineClient</a></li></ul></li><li><a href="#offix-scheduler">offix-scheduler</a></li><li><a href="#offix-conflicts-client">offix-conflicts-client</a></li><li><a href="#background">Background</a></li><li><a href="#breaking-changes-1">Breaking Changes</a><ul class="toc-headings"><li><a href="#clientofflinemutation-has-been-deprecated-in-favour-of-clientofflinemutate"><code>client.offlineMutation</code> has been deprecated in favour of <code>client.offlineMutate</code></a></li><li><a href="#clientmutate-no-longer-does-any-offline-scheduling">client.mutate no longer does any offline scheduling</a></li><li><a href="#removed-onlineonly-directive">Removed <code>@OnlineOnly</code> directive</a></li><li><a href="#errors-from-clientofflinemutate-do-not-have-networkerror-property">Errors from <code>client.offlineMutate()</code> do not have <code>networkError</code> property.</a></li><li><a href="#offlinequeue-and-offlinestore-are-generic-typescript-users-only"><code>OfflineQueue</code> and <code>OfflineStore</code> are generic (TypeScript Users Only)</a></li><li><a href="#new-arguments-passed-to-registerofflineeventlistener-functions">New Arguments passed to registerOfflineEventListener functions</a></li><li><a href="#operations-stored-in-offlinestore-are-not-backwards-compatible">Operations Stored in OfflineStore are not backwards compatible</a></li></ul></li><li><a href="#features">Features</a><ul class="toc-headings"><li><a href="#new-documentation-website">New Documentation Website!</a></li><li><a href="#offlinequeue-is-directly-accessible-on-the-client">OfflineQueue is directly accessible on the client</a></li><li><a href="#offlineclient-accepts-user-provided-inmemorycache">OfflineClient accepts user provided <code>InMemoryCache</code></a></li><li><a href="#offlineclient-enables-wiping-out-cache-using-persistor-interface">OfflineClient enables wiping out cache using persistor interface</a></li></ul></li><li><a href="#features-1">Features</a><ul class="toc-headings"><li><a href="#offix-react-hooks-alpha-released">Offix React Hooks Alpha released</a></li><li><a href="#ability-to-customize-apollo-link-chain">Ability to customize Apollo Link chain</a></li><li><a href="#new-way-to-access-apollo-client">New way to access Apollo Client</a></li></ul></li><li><a href="#breaking-changes-2">Breaking changes</a><ul class="toc-headings"><li><a href="#changes-for-subscriptions-and-file-uploads">Changes for Subscriptions and File Uploads</a></li><li><a href="#071">0.7.1</a></li><li><a href="#070">0.7.0</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2019 Offix Contributors</section></footer></div></body></html>